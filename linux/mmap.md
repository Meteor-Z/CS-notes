# mmap

## 传统读入

1. 将文件读入到内存中
2. 修改内存中的内容
3. 内存内容写入到文件中

`read()`:已从从磁盘拷贝到`page cache`，一次是从`page cache`拷贝到用户态内存
但是这里修改的时候有用户态和内核态的区分，内存中的内容首先会放到内核态上，如果要修改，那么就要将这些文件再搬到用户态，

这里就需要多次拷贝

1. 数据从硬盘搬运到内核态，
2. 如果要修改数据，那么就要将其文件再次发送到用户态。这里还有一次拷贝
3. 如果要保存，那么还要保存到用户态，然后再保存到内核态
4. 内核态中的数据还要再次写入到硬盘上

这里就经过了很多次拷贝，这时候，如果说你要读取一个文件，然后将这个文件发送到另一个文件的受伤，

1. 将A在内核态的文件读取到用户态
2. 将用户态的文件写入到B文件的用户态上
3. 然后用户态的文件还要写回到内核态

这里都要经过两次无用的操作，拷贝到用户态

## 零拷贝

文件在内核态就不需要拷贝到用户态了，直接从内核态到内核态。