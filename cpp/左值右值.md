# 数值

- 值类型 ：
- 值类别
  - 拥有身份且不可被移动的表达式被称作左值 (lvalue)表达式；
  - 拥有身份且可被移动的表达式被称作亡值 (xvalue)表达式；
  - 不拥有身份且可被移动的表达式被称作纯右值 (prvalue)表达式； 
  - 不拥有身份且不可被移动的表达式无法使用。 拥有身份的表达式被称作“泛左值 (glvalue) 表达式”。左值和亡值都是泛左值表达式。
  - 可被移动的表达式被称作“右值 (rvalue) 表达式”。纯右值和亡值都是右值表达式。

![左值-右值的区别](https://github.com/Meteor-Z/CS-notes/blob/main/image/cpp/%E5%B7%A6%E5%80%BC-%E5%8F%B3%E5%80%BC.png?raw=true)

将亡值(xvalue, expiring value) 将要死亡的数值，是左值将要死亡的值，盗取这个左值的内存空间类获取的数值。如果这个将亡值要死亡，那么可以通过右值引用来获取它的那块地方，然后给他寻觅，就是栈要析构它了，std::move()一下，就可以直接给他续命。

```c++
std::string fun() {
  std::string str;
  // ...
  return str;
}

std::string s = fun();
```

## 注意事项

`std::move(a)`，这样并没有进行移动，他仅仅是将左值变成右值，仅仅是在构造初始化或者移动复制的时候才会发生真正的移动！并且`std::forward<T>()`也没有真正的转发，只是根据参数类型进行合理的转发，

std::move执行到右值的无条件的转换，但就自身而言，它不移动任何东西。
std::forward只有当它的参数被绑定到一个右值时，才将参数转换为右值。否则左值依旧是左值，右值依旧是右值。