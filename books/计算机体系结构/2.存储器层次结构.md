# 存储器层次结构

1. 空间局部性：同一个位置上的数据，在较短的事件内可能会重新使用
2. 时间局部性：在较短时间内，可能会重新引用这些数据

基于以上两个局部性，所以设置了存储器的相关概念

大致是：寄存器 > L1cache -> L2cache -> L3cache -> 内存 -> 存储器 -> 网络上的数据

而且数据差距不是一般的大，寄存器的速度量级在`ps（皮秒）`的量级，cache的速度在`纳秒`的量级，内存在`100ns`左右，而存储是直接`微妙`的级别了，

## 映射方式

cache和外存之间交换不是以一个字节一个字节进行交换的，而是通过`cacheline`进行交换的，应该是64字节，同样，cache和cache之间也是这样以一个`cacheline`进行交换的，每一个`cacheline`上都有一个tag标签，用于表明于哪一个存储器相对应，

- 对应方式：
  - 组相联：以组的形式，分组的形式这一组跟这些数据对应
  - 直接映射：cache和cache之间进行映射
  - 全相联映射：cache可以放任何地方，

## cache读取数据

1. 写直达：更新缓存中条目的时候，会将数据也更新到主存储器中，并且对其更新
2. 写回：仅仅更缓存，当要替换的时候，再将其赋值到存储器里面

都可以使用写缓冲区

## 提高缓存优化

- 