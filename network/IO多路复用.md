# IO多路复用

一个网络服务器如何要接收多个来自不同ip的请求，这时候可以开启很多的线程来接收这个请求，但是开辟线程的性能消耗是很大的，所以有了IO复用。

## select函数

- 将多个文件描述符集中在一起然后一起统一监视，select函数需要接收一个集合,表示有没有这个描述符，但是C没有`std::set`,于是就有一个fd_set数组来表示有没有这个文件描述符，如果有的话，设为1，如果没有的话，设置为0
- 同样，select函数是非堵塞/堵塞函数,主要看最后一个超出时间的失效性.

### 优点/缺点

- 优点：服务器介入者少, 程序具有兼容性。
- 缺点：每次调用之后都会对所有的文件描述符进行循环,性能肯定是不行的，每次还要将监控信息进行传来传去(传给os)，(这个是最耗费时间的)

如何将这个进行弥补呢？ -> epoll (仅向操作系统传递一次监视对象,监视范围或者内容变化只通知发生变化的事项。)

## epoll函数

1. 无需编写以监视状态为目的的针对所有文件描述符？
2. epoll_wait()函数不需要每次都传递监视对象信息

>现在epoll_create(int size);中的size已经可以完全忽略掉，操作系统会自行控制其例程
